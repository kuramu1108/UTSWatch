<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>UTS Watch MiniFab Ver. VI</title>
<meta http-equiv="Content-Type" content="text/html; charset=euc-kr" />
<script language="javascript" type="text/javascript" src="js/jquery-2.1.4.js"></script>
<!-- Link CSS -->
<link rel="stylesheet" type="text/css" href="css/normalize.css"></link>
<link rel="shortcut icon" href="../favicon.ico"></link>
<link rel="stylesheet" type="text/css" href="css/default.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<link rel="stylesheet" type="text/css" href="css/documentation.css" />
<script src="js/modernizr.custom.js"></script>

<!-- Geometry Script -->
<script type="text/javascript" src="js/three.js"></script>
<!-- 		<script type="text/javascript" src="js/Geometry/three_mod.js"></script> -->
<script type="text/javascript" src="js/Geometry/jquery-1.9.0.js"></script>
<script type="text/javascript" src="js/Geometry/stats.js"></script>
<script type="text/javascript" src="js/Geometry/dat.gui.js"></script>
<script type="text/javascript" src="js/OrbitControls.js"></script>
<script type="text/javascript" src="js/STLExporter.js"></script>
<script type="text/javascript" src="js/FileSaver.js"></script>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript" src="js/pointer.js"></script> 
<style>

body, html { font-size: 100%; padding: 0; margin: 0; height: 100%;}

body {
	font-family: 'Lato', Calibri, Arial, sans-serif;
	color: #89867e;
	background: #fff;
}
#WebGLcanvas {
	overflow: hidden;
	-ms-touch-action: none;
}

#WebGLcanvas {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	margin: auto;
}
/* assign as <ul> class a to avoid applying on all <ul>*/
div > ul.a {
	list-style: none; 
	padding: 0; /* 메뉴의 첫 빈공간*/
	margin: 0;
}

ul.a li {
	top: 0;
    left: 0;
	padding: 0.15em; /* 버튼의 크기*/
	position: relative;
	float: left;
	background: none;
	list-style: none;
	text-decoration: none;
}

li ul {
	display: inline;
}

ul li a {
	text-decoration: none;
}

.main-navigation li ul li {
	border-top: 0;
}

ul ul ul {
	left: 100%;
	top: 0;
}
/*
ul:before, ul:after {
	content: " "; /* 1 */
	display: table; /* 2 */
}
*/
ul:after {
	clear: both;
}


/* Common button styles */
.button {
	float: left;
	min-width: 150px;
	max-width: 250px;
	display: block;
	margin: 1em;
	padding: 1em 2em;
	border: none;
	background: ffffff;
	color: inherit;
	vertical-align: middle;
	position: relative;
	z-index: 1;
	-webkit-backface-visibility: hidden;
	-moz-osx-font-smoothing: grayscale;
}
.button:focus {
	outline: none;
}
.button > span {
	vertical-align: middle;
}


/* Sizes */
.button--size-s {
	font-size: 14px;
}
.button--size-m {
	font-size: 16px;
}
.button--size-l {
	font-size: 18px;
}

/* Typography and Roundedness */

.button--text-thick {
	font-weight: 600;
}

.button--round-l {
	border-radius: 40px;
}

/* Sacnite */
.button.button--sacnite {
	width: 70px;
	height: 70px;
	min-width: 0;
	padding: 0;
	color: #fff;
	-webkit-transition: color 0.3s;
	transition: color 0.3s;
}
.button--scanite.button--round-l {
	border-radius: 50%;
}

.button--sacnite::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	border-radius: inherit;
	z-index: -1;
	box-shadow: inset 0 0 0 35px #000000;
	-webkit-transform: scale3d(0.9, 0.9, 1);
	transform: scale3d(0.9, 0.9, 1);
	-webkit-transition: box-shadow 0.3s, -webkit-transform 0.3;
	transition: box-shadow 0.3s, transform 0.3s;
}

.button--sacnite .button__icon {
	font-size: 22px;
	width: 22px;
}
.button--sacnite > span {
	position: absolute;
	opacity: 0;
	pointer-events: none;
}
.button--sacnite:hover {
	color: #37474f;
}

.button--sacnite:hover::before {
	box-shadow: inset 0 0 0 2px #37474f;
	-webkit-transform: scale3d(1, 1, 1);
	transform: scale3d(1, 1, 1);
}

.menuwrapper {
	width: 100%;
	max-width: 100%;
	/*Position of the menu holder. 10.08.15 Chris*/
	position: fixed;
	bottom: 1%;
}

.fb-container {
	position: relative;
	background: none;
	top: 0%;
	left: 0%;
}

</style>

<!-- Fixed Script from MixPanel. This must be before </head> tag. Do not modify / 29.09.15 Chris -->
<!-- start Mixpanel --><script type="text/javascript">(function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,e,d])};b.__SV=1.2;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}})(document,window.mixpanel||[]);
mixpanel.init("7850985362ff8cee034ed112ee70d62b");</script><!-- end Mixpanel -->

</head>
<body>
	<!-- MIX PANEL Script to colldect Data. Do not modify / 29.09.15 Chris --> 
	<script>
	mixpanel.track("UTS_Watch");
	</script>
	
	    <!-- Load Facebook SDK for JavaScript -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.3";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    
		<!-------------- 3D Geometry Start Here ------------------->

	<!-- Div which will hold the Output -->
	<canvas id="WebGLcanvas"></canvas>
	<!-- 					<div id="WebGL-output"></div>  -->
	<!-- Javascript code that runs our Three.js examples -->
	<script type="text/javascript">
		// variable for setting up the scene three.js and WebGL
		var scene, camera, webGLRenderer, step;
		var exportFile;
		// variable for shape holder
		var initialBezel, initialLug, initialFace, initialCrown, initialStrap;
		// variable for mesh holder
						var bezelMesh = new THREE.Mesh();
						var lugMesh = new THREE.Mesh();
						var faceMesh = new THREE.Mesh();
						var crownMesh = new THREE.Mesh();
						var strapMesh = new THREE.Mesh();
						var strapMesh2 = new THREE.Mesh();
		// variable for control holder
		var bezelControls, lugControls, faceControls, crownControls, strapControls;
		// variable for extrude option holder
		var bezelOptions, lugOptions, faceOptions, crownOptions, strapOptions;

		// variable for selecting object
		var raycaster = new THREE.Raycaster()
		var mouse = new THREE.Vector2();
		var meshCollection = [];
		var SELECTED = null;
		var MODE = "bezel-amount";
		var strapWidth = 15;
		var bezel_radius = 35;

		// helping function
		function map(current, min, max, v) {
			if (v >= 1) {
				var temp = current + v * 0.2;
				if (temp >= max)
					temp = max;
			} else {
				var temp = current - 1 * v;
				if (temp <= min)
					temp = min;
			}
			return temp;
		}

		function repopulateArray() {
			meshCollection = [];
			meshCollection.push(bezelMesh);
			meshCollection.push(lugMesh);
			meshCollection.push(faceMesh);
			meshCollection.push(crownMesh);
			meshCollection.push(strapMesh);
			meshCollection.push(strapMesh2);
		}

		//touch event enable
		var thisOne = document.getElementById("WebGLcanvas");
		thisOne.addEventListener('gesturescale', function(e) {
			//strapWidth = map(strapWidth, 15, 18, e.scale);
			//updateStrapWidth();
			updateValueScale(e.scale);
		});

		thisOne.addEventListener("gesturedoubletap", function() {
			//strapWidth = 18;
			//updateStrapWidth();
			updateValueDoubleTap();
		});

		function onWindowResize() {

			camera.aspect = window.innerWidth / window.innerHeight;

			camera.updateProjectionMatrix();

			webGLRenderer.setSize(window.innerWidth, window.innerHeight);

		}

		function onDocumentTouchStart(event) {

			event.preventDefault();

			event.clientX = event.touches[0].clientX;
			event.clientY = event.touches[0].clientY;
			onDocumentMouseDown(event);

		}
		function onDocumentMouseDown(event) {

			event.preventDefault();

			mouse.x = (event.clientX / $("#WebGLcanvas").width()) * 2 - 1;
			mouse.y = -(event.clientY / $("#WebGLcanvas").height()) * 2 + 1;
			var vector = new THREE.Vector3(mouse.x, mouse.y, 1);
			//projector.unproject( vector, camera );
			vector.unproject(camera);
			//raycaster.setFromCamera( mouse, camera );
			raycaster = new THREE.Raycaster(camera.position, vector.sub(
					camera.position).normalize());
			var intersects = raycaster.intersectObjects(meshCollection, true);
			console.log(intersects.toString());
			if (intersects.length > 0) {
				if (SELECTED) {
					SELECTED.object.material.color.setHex(0x96b0be);
				}
				intersects[0].object.material.color
						.setHex(Math.random() * 0xffffff);
				SELECTED = intersects[0];
			}
		}

		//start rendering
		init();
		
		function updateValueScale(v)
						{
							if (SELECTED.object.name == "bezel"){
								switch(MODE)
								{
									case "bezel-amount":
									bezelControls.amount = map(bezelControls.amount, 0,10, v);
									updateBezel();
									break;
									case "bezel-bevelThickness":
									bezelControls.bevelThickness = map(bezelControls.bevelThickness, 0,10, v);
									updateBezel();
									break;
									case "bezel-bevelSize":
									bezelControls.bevelSize = map(bezelControls.bevelSize, 0,10, v);
									updateBezel();
									break;
									default:
									break;
								}
							} else {}
						}
						
						function updateValueDoubleTap()
						{
							if (SELECTED.object.name == "bezel"){
								switch(MODE)
								{
									case "bezel-amount":
									bezelControls.amount = 2;
									updateBezel();
									break;
									case "bezel-bevelThickness":
									bezelControls.bevelThickness = 2;
									updateBezel();
									break;
									case "bezel-bevelSize":
									bezelControls.bevelSize = 0.5;
									updateBezel();
									break;
									default:
									break;
								}
							} else {
							}
						}
						
		function updateBezel(){
			bezelControls.asGeom();
			repopulateArray();
		}
						
		function changeMODE(mode){
			MODE = mode;
			console.log(MODE);
		}
		//update function
		function updateStrapWidth() {
			initialLug = drawLug();
			lugControls.asGeom();
			initialStrap = drawStrap();
			strapControls.asGeom();
			repopulateArray();
		}

		function render() {
			//shape.rotation.y = step += 0.02;

			// render using requestAnimationFrame
			requestAnimationFrame(render);
			webGLRenderer.render(scene, camera);
		}

		function drawLug() {
			var lugs = [];
			// create a basic shape of lugs
			var trlug = new THREE.Shape();
			//var strapWidth = 15;
			var form = 2;
			var ox = strapWidth;
			var oy = 46 - form * (strapWidth - 14);
			var limit = 25;
			trlug.moveTo(ox, oy);
			trlug.lineTo(limit, 46 - form * (limit - 14));
			trlug.lineTo(ox, (46 - form * (limit - 14)));
			trlug.lineTo(ox, oy);

			var bllug = new THREE.Shape();
			bllug.moveTo(-ox, -oy);
			bllug.lineTo(-limit, -46 + form * (limit - 14));
			bllug.lineTo(-ox, -46 + form * (limit - 14));
			bllug.lineTo(-ox, -oy);

			var brlug = new THREE.Shape();
			brlug.moveTo(ox, -oy);
			brlug.lineTo(limit, -46 + form * (limit - 14));
			brlug.lineTo(ox, -46 + form * (limit - 14));
			brlug.lineTo(ox, -oy);

			var tllug = new THREE.Shape();
			tllug.moveTo(-ox, oy);
			tllug.lineTo(-limit, 46 - form * (limit - 14));
			tllug.lineTo(-ox, 46 - form * (limit - 14));
			tllug.lineTo(-ox, oy);
			// return the shape
			lugs.push(trlug);
			lugs.push(bllug);
			lugs.push(brlug);
			lugs.push(tllug);
			return lugs;
		}

		function drawBezel(r) {

			// create a basic shape
			var circle = new THREE.Shape();
			radius = r;

			for (var i = 0; i < 360; i++) {
				var pct = (i + 1) / 360;
				var theta = pct * Math.PI * 2.0;
				var x = radius * Math.cos(theta);
				var y = radius * Math.sin(theta);
				if (i == 0) {
					circle.moveTo(x, y);
				} else {
					circle.lineTo(x, y);
				}
			}

			var hole = new THREE.Path();
			var iRadius = 26;
			for (var i = 0; i < 360; i++) {
				var pct = (i + 1) / 360;
				var theta = pct * Math.PI * 2.0;
				var x = iRadius * Math.cos(theta);
				var y = iRadius * Math.sin(theta);
				if (i == 0) {
					hole.moveTo(x, y);
				} else {
					hole.lineTo(x, y);
				}
			}
			circle.holes.push(hole);
			// return the shape
			return circle;
		}

		function drawWatchFace(r) {
			// create a basic shape
			var circle = new THREE.Shape();
			radius = r;

			for (var i = 0; i < 360; i++) {
				var pct = (i + 1) / 360;
				var theta = pct * Math.PI * 2.0;
				var x = radius * Math.cos(theta);
				var y = radius * Math.sin(theta);
				if (i == 0) {
					circle.moveTo(x, y);
				} else {
					circle.lineTo(x, y);
				}
			}

			return circle;
		}

		function drawCrown() {
			// create a basic shape
			var circle = new THREE.Shape();
			radius = 5;

			for (var i = 0; i < 360; i++) {
				var pct = (i + 1) / 360;
				var theta = pct * Math.PI * 2.0;
				var x = radius * Math.cos(theta);
				var y = radius * Math.sin(theta);
				if (i == 0) {
					circle.moveTo(x, y);
				} else {
					circle.lineTo(x, y);
				}
			}

			return circle;
		}

		function drawStrap() {
			// create a basic shape
			var rect = new THREE.Shape();
			rect.moveTo(strapWidth, 1);
			rect.lineTo(strapWidth, -1);
			rect.lineTo(-strapWidth, -1);
			rect.lineTo(-strapWidth, 1);
			rect.lineTo(strapWidth, 1);
			return rect;
		}

		function createMesh(geom) {
			//geom.applyMatrix(new THREE.Matrix4().makeTranslation(-20, 0, 0));

			// assign two materials
			var meshMaterial = new THREE.MeshPhongMaterial({
				color : 0x96b0be,
				specular : 0x847c7c,
				shininess : 30,
				combine : THREE.MultiplyOperation
			});

			//  meshMaterial.side = THREE.DoubleSide;
			var wireFrameMat = new THREE.MeshBasicMaterial();
			wireFrameMat.wireframe = true;

			// create a multimaterial
			var mesh = new THREE.SceneUtils.createMultiMaterialObject(geom,
					[ meshMaterial ]);
			//var mesh = THREE.SceneUtils.createMultiMaterialObject(geom, [wireFrameMat]);
			
			 // the return type of mesh is OBject3D, the mesh object is in its children[0] property   by Po-Hao
			return mesh;
		}

		function shapeCreation() {
			initialBezel = drawBezel(bezel_radius);
			initialLug = drawLug();
			initialFace = drawWatchFace(bezel_radius);
			initialCrown = drawCrown();
			initialStrap = drawStrap();

		}

		// once everything is loaded, we run our Three.js stuff.
		function init() {

			var container = document.getElementById("WebGLcanvas");
			// create a scene, that will hold all our elements such as objects, cameras and lights.
			scene = new THREE.Scene();

			// create a camera, which defines where we're looking at.
			camera = new THREE.PerspectiveCamera(45, window.innerWidth
					/ window.innerHeight, 0.1, 1000);
			scene.add(camera);
			// create a render and set the size
			webGLRenderer = new THREE.WebGLRenderer({
				canvas : container
			});
			webGLRenderer.setClearColor(new THREE.Color(0x000000, 1.0));
			webGLRenderer.setSize(window.innerWidth, window.innerHeight);
			webGLRenderer.shadowMapEnabled = true;

			shapeCreation();
			var controler = new THREE.OrbitControls(camera,
					webGLRenderer.domElement);
			controler.noZoom = true;
			// position and point the camera to the center of the scene
			camera.position.x = 0;
			camera.position.y = 0;
			camera.position.z = 200;
			camera.lookAt(new THREE.Vector3(0, 0, 0));

			//scene.add( new THREE.AmbientLight( 0xffffff ) );

			var light1 = new THREE.PointLight(0xffffff, 0.3);
			light1.position.set(0, 0, 150);
			scene.add(light1);

			var light2 = new THREE.PointLight(0xffffff, 0.3);
			light2.position.set(-50, 50, 50);
			scene.add(light2);

			var light3 = new THREE.PointLight(0xffffff, 0.3);
			light3.position.set(50, 50, 50);
			scene.add(light3);

			var light4 = new THREE.PointLight(0xffffff, 0.3);
			light4.position.set(50, 50, -50);
			scene.add(light4);

			var light5 = new THREE.PointLight(0xffffff, 0.3);
			light5.position.set(-50, 50, -50);
			scene.add(light5);

			var light6 = new THREE.PointLight(0xffffff, 0.3);
			light6.position.set(50, 0, 0);
			scene.add(light6);
			// add the output of the renderer to the html element
			//container.appendChild(webGLRenderer.domElement);

			webGLRenderer.domElement.addEventListener('mousedown',
					onDocumentMouseDown, false);
			webGLRenderer.domElement.addEventListener('touchstart',
					onDocumentTouchStart, false);

			window.addEventListener('resize', onWindowResize, false);
			// call the render function
			step = 0;

			// setup the control for Bezel
			bezelControls = new function() {
				this.amount = 2;
				this.bevelThickness = 2;
				this.bevelSize = 0.5;
				this.bevelSegments = 3;
				this.bevelEnabled = true;
				this.curveSegments = 12;
				this.steps = 1;
				this.asGeom = function() {
					scene.remove(bezelMesh);
					// create a new one

					bezelOptions = {
						amount : bezelControls.amount,
						bevelThickness : bezelControls.bevelThickness,
						bevelSize : bezelControls.bevelSize,
						bevelSegments : bezelControls.bevelSegments,
						bevelEnabled : bezelControls.bevelEnabled,
						curveSegments : bezelControls.curveSegments,
						steps : bezelControls.steps,
					};

					bezelMesh = createMesh(new THREE.ExtrudeGeometry(
							initialBezel, bezelOptions));
					bezelMesh.children[0].controler = bezelControls;
					bezelMesh.children[0].name = "bezel";
					// add it to the scene.									
					scene.add(bezelMesh);
					repopulateArray();
				};

			}

			// control for lug
			lugControls = new function() {
				this.amount = 2;
				this.bevelThickness = 1;
				this.bevelSize = 0.5;
				this.bevelSegments = 3;
				this.bevelEnabled = true;
				this.curveSegments = 12;
				this.steps = 1;
				this.asGeom = function() {
					// remove the old plane
					scene.remove(lugMesh);
					// create a new one

					lugOptions = {
						amount : lugControls.amount,
						bevelThickness : lugControls.bevelThickness,
						bevelSize : lugControls.bevelSize,
						bevelSegments : lugControls.bevelSegments,
						bevelEnabled : lugControls.bevelEnabled,
						curveSegments : lugControls.curveSegments,
						steps : lugControls.steps,
					};

					lugMesh = createMesh(new THREE.ExtrudeGeometry(initialLug,
							lugOptions));
					// add it to the scene.
					scene.add(lugMesh);
				};

			}
			// control for watch face
			faceControls = new function() {
				this.amount = .5;
				this.bevelThickness = 0;
				this.bevelSize = 0;
				this.bevelSegments = 0;
				this.bevelEnabled = false;
				this.asGeom = function() {
					// remove the old plane
					//scene.remove(shape);
					scene.remove(faceMesh);
					// create a new one

					faceOptions = {
						amount : faceControls.amount,
						bevelThickness : faceControls.bevelThickness,
						bevelSize : faceControls.bevelSize,
						bevelSegments : faceControls.bevelSegments,
						bevelEnabled : faceControls.bevelEnabled,

					};
					faceMesh = createMesh(new THREE.ExtrudeGeometry(
							initialFace, faceOptions));
					// add it to the scene.
					//scene.add(shape);
					scene.add(faceMesh);
				};

			}
			// control for crown
			crownControls = new function() {
				this.amount = 2;
				this.bevelThickness = 1;
				this.bevelSize = 0.5;
				this.bevelSegments = 3;
				this.bevelEnabled = true;
				this.curveSegments = 12;
				this.steps = 1;
				this.asGeom = function() {
					// remove the old plane
					//scene.remove(shape);
					scene.remove(crownMesh);
					// create a new one

					crownOptions = {
						amount : crownControls.amount,
						bevelThickness : crownControls.bevelThickness,
						bevelSize : crownControls.bevelSize,
						bevelSegments : crownControls.bevelSegments,
						bevelEnabled : crownControls.bevelEnabled,
						curveSegments : crownControls.curveSegments,
						steps : crownControls.steps,
					};

					crownMesh = createMesh(new THREE.ExtrudeGeometry(
							initialCrown, crownOptions));
					// add it to the scene.
					//scene.add(shape);
					scene.add(crownMesh);
					crownMesh.rotation.y = Math.PI / 2;
					crownMesh.position
							.set(bezel_radius - this.amount / 2, 0, 0);
				};

			}
			//control for strap
			strapControls = new function() {
				this.bevelEnabled = false;
				this.steps = 200;
				var roundPath = [];
				for (var i = 0; i < 180; i++) {
					var pct = (i + 1) / 360;
					var theta = pct * Math.PI * 2.0;
					var y = 35 * Math.cos(theta);
					var z = 35 * Math.sin(theta);
					roundPath.push(new THREE.Vector3(0, y, z));
				}

				this.extrudePath = new THREE.SplineCurve3(roundPath);
				this.asGeom = function() {
					// remove the old plane
					//scene.remove(shape);
					scene.remove(strapMesh);
					scene.remove(strapMesh2);
					// create a new one

					strapOptions = {

						bevelEnabled : strapControls.bevelEnabled,
						steps : strapControls.steps,
						extrudePath : strapControls.extrudePath
					};

					strapMesh = createMesh(new THREE.ExtrudeGeometry(
							initialStrap, strapOptions));
					strapMesh2 = createMesh(new THREE.ExtrudeGeometry(
							initialStrap, strapOptions));
					// add it to the scene.
					//scene.add(shape);
					scene.add(strapMesh);
					scene.add(strapMesh2);
					strapMesh.rotation.x = Math.PI / 2;
					strapMesh.position.set(0, -bezel_radius, -35);
					strapMesh2.rotation.x = -Math.PI / 2;
					strapMesh2.position.set(0, bezel_radius, -35);

				};

			}

			// Chris : Here applied CSS to change location of dropdown menu
			// CSS at component.css line 1116
			var gui = new dat.GUI();
			gui.domElement.id = 'gui';
			gui.add(bezelControls, 'amount', 0, 20).onChange(
					bezelControls.asGeom);
			gui.add(bezelControls, 'bevelThickness', 0, 10).onChange(
					bezelControls.asGeom);
			gui.add(bezelControls, 'bevelSize', 0, 10).onChange(
					bezelControls.asGeom);
			gui.add(bezelControls, 'bevelSegments', 0, 30).step(1).onChange(
					bezelControls.asGeom);
			gui.add(bezelControls, 'curveSegments', 1, 30).step(1).onChange(
					bezelControls.asGeom);
			gui.add(bezelControls, 'steps', 1, 5).step(1).onChange(
					bezelControls.asGeom);

			bezelControls.asGeom();
			lugControls.asGeom();
			faceControls.asGeom();
			crownControls.asGeom();
			strapControls.asGeom();
			repopulateArray();
			//changes the values, removes the old plane, draws a new shape to the screen
			//shape.rotation.y = 150;
			render();

		}

		//EXPORT###

		/*
		function save() {
		 	exportFile = new THREE.ExtrudeGeometry(initialBezel, bezelOptions);
		 	var geometry_p2 = new THREE.ExtrudeGeometry(initialLug, lugOptions);
		
		 	THREE.GeometryUtils.merge( exportFile, geometry_p2 );
			
			var stl = startExport();

			var blob = new Blob([stl], {type: 'text/plain'});
			saveAs(blob, 'pixel_printer.stl');
		}
			
		function startExport(){

			var stl = generateSTL( exportFile );
			return stl;
		}
		 */
		function save() {
			saveSTL(scene, 'yourWatch');
		}
		//EXPORT###
	</script>
	<!--  Bottom Menu -->
	<div class="menuwrapper">
		<ul id="main-list" class="a">
			<li id="submenu_1"><a href="#"><button class="button button--sacnite button--round-l">1</button></a></li>
			<li id="submenu_2"><a href="#"><button class="button button--sacnite button--round-l">2</button></a></li>
			<li id="submenu_3"><a href="#"><button class="button button--sacnite button--round-l">3</button></a></li>
			<li id="submenu_4"><a href="#"><button class="button button--sacnite button--round-l">4</button></a></li>
			<li id="submenu_5"><a href="#"><button class="button button--sacnite button--round-l">5</button></a></li>
		</ul>
	</div> <!-- Bottom Menu End -->

		<!-- Navigation Menu -->
	<div class="container">
		<ul id="gn-menu" class="gn-menu-main">
			<!-- Child CSS in component.css line 142 -->
			<!--  First Child -->
			<li class="gn-trigger"><a class="gn-icon gn-icon-menu"></a>
				<nav class="gn-menu-wrapper">
					<div class="gn-scroller">
						<ul class="gn-menu">
							<li><fb:login-button scope="public_profile,email" onlogin="checkLoginState();"></fb:login-button></li>
							<li><a class="gn-icon gn-icon-cog">Settings</a></li>
							<li><a class="gn-icon gn-icon-help">Help</a></li>
							<li><a class="gn-icon gn-icon-help" id="shareFB" onclick="makePost();">Share my Watch</a></li>

							<!-- <li><button id="watchSave">Save PNG (NOTWORK)</button></li> -->
			
							<li><a class="gn-icon gn-icon-help" id="logout" onclick="logout();">Not logged</a></li>
						
						</ul>
					</div>
					<div> <!-- /gn-scroller --> </div>
				</nav>
			</li>
			
			<!--  2nd Child -->
			<li><a id="fb_name" href="index.html">UTS Watch</a></li>
			<!--  3rd Child -->
			<li>	
				<!-- like button code 15.10.15 Chris -->
				<div class="fb-container"><!-- Start of FB button Contatiner -->
			 		<div class="fb-like" data-href="http://php-hexacorn.ose-pilot.uts.edu.au/UTS_Watch_verVI/index.html" data-width="300" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
				</div> <!-- End of FB button container -->
			</li>
			<!--  4th Child -->
			<li><a class="" href="javascript:save();">Export</a></li>
			<!--  5th Child -->
			<li><a class="" href="">Order</a></li>	
		</ul>
	</div><!-- Navigation Menu container end -->
	
	<!-- Script for Navigation Menu -->
	<script src="js/classie.js"></script>
	<script src="js/gnmenu.js"></script>
	<script>
		new gnMenu(document.getElementById('gn-menu'));
	</script>
</body>
</html>